{"version":3,"sources":["app/scripts.babel/contentscript.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,IAAI,KAAK,GAAG,QAAQ,CAAC,cAAc,CAAC,YAAY,CAAC;IAC7C,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,mBAAmB,CAAC;IACtD,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,+BAA+B,CAAC;IACrE,aAAa,GAAG,QAAQ,CAAC,aAAa,CAAC,oDAAoD,CAAC,CAAC;;AAEjG,IAAI,QAAQ,GAAG,SAAX,QAAQ,CAAa,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE;AAC9C,MAAI,OAAO,CAAC;AACZ,SAAO,YAAW;AAChB,QAAI,OAAO,GAAG,IAAI;QAAE,IAAI,GAAG,SAAS,CAAC;AACrC,QAAI,KAAK,GAAG,SAAR,KAAK,GAAc;AACrB,aAAO,GAAG,IAAI,CAAC;AACf,UAAI,CAAC,SAAS,EAAE;AACd,YAAI,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;OAC3B;KACF,CAAC;AACF,QAAI,OAAO,GAAG,SAAS,IAAI,CAAC,OAAO,CAAC;AACpC,gBAAY,CAAC,OAAO,CAAC,CAAC;AACtB,WAAO,GAAG,UAAU,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AAClC,QAAI,OAAO,EAAE;AACX,UAAI,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;KAC3B;GACF,CAAC;CACH,CAAC;;AAEF,IAAI,OAAO,GAAG,SAAV,OAAO,CAAa,IAAI,EAAE,EAAE,EAAE;AAChC,MAAI,IAAI,GAAG,IAAI,cAAc,EAAE,CAAC;;AAEhC,MAAI,CAAC,IAAI,CAAC,KAAK,EAAE,4CAA4C,GAAG,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC;;AAE1F,MAAI,CAAC,kBAAkB,GAAG,YAAY;AACpC,MAAE,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;GACnC,CAAC;;AAEF,MAAI,CAAC,IAAI,EAAE,CAAC;CACb,CAAC;;AAEF,IAAI,QAAQ,GAAG,QAAQ,CAAC,UAAU,CAAC,EAAE;AACnC,MAAI,KAAK,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;;AAE3B,SAAO,CAAC,KAAK,EAAE,UAAU,QAAQ,EAAE;AACjC,QAAI,MAAM,CAAC;;AAEX,WAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;;AAEtB,QAAI,aAAa,EAAE;AACjB,YAAM,GAAG,aAAa,CAAC;KACxB,MACI;AACH,YAAM,GAAG,WAAW,CAAC;KACtB;;AAED,QAAI,QAAQ,CAAC,QAAQ,IAAI,GAAG,EAAE;AAC5B,YAAM,CAAC,SAAS,GAAG,gBAAgB,CAAC;KACrC,MACI;AACH,YAAM,CAAC,SAAS,GAAG,iBAAiB,CAAC;KACtC;AACD,QAAI,QAAQ,CAAC,KAAK,IAAI,GAAG,EAAE;AACzB,YAAM,CAAC,YAAY,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;KAC7C,MACI;AACH,YAAM,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;KACpC;GACF,CAAC,CAAC;CACJ,EAAE,GAAG,CAAC,CAAC;;AAER,IAAI,KAAK,EAAE;AACT,OAAK,CAAC,gBAAgB,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;CAC3C;;AAED,IAAI,OAAO,EAAE;AACX,SAAO,CAAC,gBAAgB,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;CAC7C","file":"app/scripts.babel/contentscript.js","sourcesContent":["'use strict';\n\nvar issue = document.getElementById('issue_body'),\n    comment = document.getElementById('new_comment_field'),\n    issueSubmit = document.querySelector('.form-actions [type=\"submit\"]'),\n    commentSubmit = document.querySelector('.js-new-comment-form .form-actions [type=\"submit\"]');\n\nvar debounce = function (func, wait, immediate) {\n  var timeout;\n  return function() {\n    var context = this, args = arguments;\n    var later = function() {\n      timeout = null;\n      if (!immediate) {\n        func.apply(context, args);\n      }\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) {\n      func.apply(context, args);\n    }\n  };\n};\n\nvar analyze = function (text, cb) {\n  var http = new XMLHttpRequest();\n\n  http.open('GET', 'http://be-kind.mybluemix.net/analyze?text=' + encodeURIComponent(text));\n\n  http.onreadystatechange = function () {\n    cb(JSON.parse(http.responseText));\n  };\n\n  http.send();\n};\n\nvar testText = debounce(function (e) {\n  var input = e.target.value;\n\n  analyze(input, function (response) {\n    var submit;\n\n    console.log(response);\n\n    if (commentSubmit) {\n      submit = commentSubmit;\n    }\n    else {\n      submit = issueSubmit;\n    }\n\n    if (response.negative >= 0.5) {\n      submit.className = 'btn btn-danger';\n    }\n    else {\n      submit.className = 'btn btn-primary';\n    }\n    if (response.anger >= 0.5) {\n      submit.setAttribute('disabled', 'disabled');\n    }\n    else {\n      submit.removeAttribute('disabled');\n    }\n  });\n}, 250);\n\nif (issue) {\n  issue.addEventListener('input', testText);\n}\n\nif (comment) {\n  comment.addEventListener('input', testText);\n}"]}